{"ast":null,"code":"import { Component } from \"react\";\nimport { addTask, getTasks, updateTask, deleteTask } from \"./services/taskServices\";\n\nclass Tasks extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      tasks: [],\n      currentTask: \"\"\n    };\n\n    this.handleChange = _ref => {\n      let {\n        currentTarget: input\n      } = _ref;\n      this.setState({\n        currentTask: input.value\n      });\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const originalTasks = this.state.tasks;\n\n      try {\n        const {\n          data\n        } = await addTask({\n          task: this.state.currentTask\n        });\n        const tasks = originalTasks;\n        tasks.push(data);\n        this.setState({\n          tasks,\n          currentTask: \"\"\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    this.handleUpdate = async currentTask => {\n      const originalTasks = this.state.tasks;\n\n      try {\n        const tasks = [...originalTasks];\n        const index = tasks.findIndex(task => task._id === currentTask);\n        tasks[index] = { ...tasks[index]\n        };\n        tasks[index].completed = !tasks[index].completed;\n        this.setState({\n          tasks\n        });\n        await updateTask(currentTask, {\n          completed: tasks[index].completed\n        });\n      } catch (error) {\n        this.setState({\n          tasks: originalTasks\n        });\n        console.log(error);\n      }\n    };\n\n    this.handleDelete = async currentTask => {\n      const originalTasks = this.state.tasks;\n\n      try {\n        const tasks = originalTasks.filter(task => task._id !== currentTask);\n        this.setState({\n          tasks\n        });\n        await deleteTask(currentTask);\n      } catch (error) {\n        this.setState({\n          tasks: originalTasks\n        });\n        console.log(error);\n      }\n    };\n  }\n\n  async componentDidMount() {\n    try {\n      const {\n        data\n      } = await getTasks();\n      this.setState({\n        tasks: data\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n}\n\ntodayDate = () => {\n  let today = new Date().toLocaleDateString();\n  return today;\n};\n\nexport default Tasks;","map":{"version":3,"names":["Component","addTask","getTasks","updateTask","deleteTask","Tasks","state","tasks","currentTask","handleChange","currentTarget","input","setState","value","handleSubmit","e","preventDefault","originalTasks","data","task","push","error","console","log","handleUpdate","index","findIndex","_id","completed","handleDelete","filter","componentDidMount","todayDate","today","Date","toLocaleDateString"],"sources":["/Users/diana/Desktop/todo-app-master/client/src/Tasks.js"],"sourcesContent":["import { Component } from \"react\";\nimport {\n  addTask,\n  getTasks,\n  updateTask,\n  deleteTask,\n} from \"./services/taskServices\";\n\nclass Tasks extends Component {\n  state = { tasks: [], currentTask: \"\" };\n\n  async componentDidMount() {\n    try {\n      const { data } = await getTasks();\n      this.setState({ tasks: data });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  handleChange = ({ currentTarget: input }) => {\n    this.setState({ currentTask: input.value });\n  };\n\n  handleSubmit = async (e) => {\n    e.preventDefault();\n    const originalTasks = this.state.tasks;\n    try {\n      const { data } = await addTask({ task: this.state.currentTask });\n      const tasks = originalTasks;\n      tasks.push(data);\n      this.setState({ tasks, currentTask: \"\" });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  handleUpdate = async (currentTask) => {\n    const originalTasks = this.state.tasks;\n    try {\n      const tasks = [...originalTasks];\n      const index = tasks.findIndex((task) => task._id === currentTask);\n      tasks[index] = { ...tasks[index] };\n      tasks[index].completed = !tasks[index].completed;\n      this.setState({ tasks });\n      await updateTask(currentTask, {\n        completed: tasks[index].completed,\n      });\n    } catch (error) {\n      this.setState({ tasks: originalTasks });\n      console.log(error);\n    }\n  };\n\n  handleDelete = async (currentTask) => {\n    const originalTasks = this.state.tasks;\n    try {\n      const tasks = originalTasks.filter((task) => task._id !== currentTask);\n      this.setState({ tasks });\n      await deleteTask(currentTask);\n    } catch (error) {\n      this.setState({ tasks: originalTasks });\n      console.log(error);\n    }\n  };\n}\n\ntodayDate = () => {\n  let today = new Date().toLocaleDateString();\n  return today;\n};\n\nexport default Tasks;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}